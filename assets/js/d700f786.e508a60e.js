"use strict";(self.webpackChunkhousing_repairs_online=self.webpackChunkhousing_repairs_online||[]).push([[3511],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return c}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=s(n),c=r,k=m["".concat(p,".").concat(c)]||m[c]||u[c]||i;return n?a.createElement(k,o(o({ref:t},d),{},{components:n})):a.createElement(k,o({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2849:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return o},default:function(){return u},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return s}});var a=n(3117),r=(n(7294),n(3905));const i={sidebar_position:1},o="Front end",l={unversionedId:"front-end/frameworks-used",id:"front-end/frameworks-used",title:"Front end",description:"GitHub Repository",source:"@site/docs/front-end/frameworks-used.md",sourceDirName:"front-end",slug:"/front-end/frameworks-used",permalink:"/housing-repairs-online/front-end/frameworks-used",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/front-end/frameworks-used.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Housing Repairs Online",permalink:"/housing-repairs-online/"},next:{title:"Look and feel",permalink:"/housing-repairs-online/front-end/look-and-feel"}},p={},s=[{value:"Frameworks used",id:"frameworks-used",level:2},{value:"Next.js",id:"nextjs",level:3},{value:"Environment variables",id:"environment-variables",level:2},{value:"Add to Azure Portal",id:"add-to-azure-portal",level:3},{value:"Add to GitHub Repository Secrets",id:"add-to-github-repository-secrets",level:3},{value:"Adding local authority web links (i.e. Accessibility Statement, Privacy Notice, Contact Us)",id:"adding-local-authority-web-links-ie-accessibility-statement-privacy-notice-contact-us",level:3},{value:"Adding local authority customer services opening hours",id:"adding-local-authority-customer-services-opening-hours",level:3},{value:"Usage",id:"usage",level:4},{value:"As a JSON object",id:"as-a-json-object",level:5},{value:"As a line of text (i.e not in JSON)",id:"as-a-line-of-text-ie-not-in-json",level:5},{value:"Feature Flags",id:"feature-flags",level:2},{value:"Monitoring and alerting",id:"monitoring-and-alerting",level:2}],d={toc:s};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"front-end"},"Front end"),(0,r.kt)("a",{class:"badge badge--secondary",href:"https://github.com/City-of-Lincoln-Council/housing-repairs-online-frontend"},"GitHub Repository"),(0,r.kt)("h2",{id:"frameworks-used"},"Frameworks used"),(0,r.kt)("p",null,"The frontend of the Housing Repairs Online app is built using Next.js and\ndeployed as an Azure static web app and functions."),(0,r.kt)("h3",{id:"nextjs"},"Next.js"),(0,r.kt)("p",null,"Is a react framework that provides client-side and server-side rendering."),(0,r.kt)("p",null,"Source code for the app could be ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/City-of-Lincoln-Council/housing-repairs-online-frontend"},"found here"),"."),(0,r.kt)("p",null,"The frontend is currently deployed to Azure static web using github actions."),(0,r.kt)("p",null,"Each next.js API endpoint is deployed as an Azure function."),(0,r.kt)("h2",{id:"environment-variables"},"Environment variables"),(0,r.kt)("h3",{id:"add-to-azure-portal"},"Add to Azure Portal"),(0,r.kt)("p",null,"The following environment variables need to be ",(0,r.kt)("strong",{parentName:"p"},"set in the Azure portal")," to enable\nthe frontend app to make calls to be Repairs API:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"REPAIRS_API_BASE_URL")),(0,r.kt)("td",{parentName:"tr",align:null},"URL of the Repairs API, ",(0,r.kt)("a",{parentName:"td",href:"../repairs-api/intro"},"see docs"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"REPAIRS_API_IDENTIFIER")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique authentication identifier for the accessing the API, ",(0,r.kt)("a",{parentName:"td",href:"../repairs-api/intro"},"see docs"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SENTRY_DSN")),(0,r.kt)("td",{parentName:"tr",align:null},"The Sentry project Data Source Name (DSN), ",(0,r.kt)("a",{parentName:"td",href:"../alerting-and-monitoring/intro#azure-component-setup"},"see docs"),".")))),(0,r.kt)("h3",{id:"add-to-github-repository-secrets"},"Add to GitHub Repository Secrets"),(0,r.kt)("p",null,"Any environment variable that needs to be used on the client side should be set\nat deployment time in the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/City-of-Lincoln-Council/housing-repairs-online-frontend/blob/main/.github/workflows/azure-static-web-apps-purple-desert-05060ea03.yml#L100"},(0,r.kt)("inlineCode",{parentName:"a"},"Build And Deploy")," job"),"."),(0,r.kt)("p",null,"The following variables are required by the front end and should be setup as ",(0,r.kt)("strong",{parentName:"p"},"GitHub secrets for the repository"),":"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SENTRY_DSN")),(0,r.kt)("td",{parentName:"tr",align:null},"The Sentry project Data Source Name (DSN).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SENTRY_ORG")),(0,r.kt)("td",{parentName:"tr",align:null},"The organisation specified in Sentry.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SENTRY_AUTH_TOKEN")),(0,r.kt)("td",{parentName:"tr",align:null},"Authentication token used for all communication with Sentry.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"CUSTOMER_SERVICES_TELEPHONE_NUMBER")),(0,r.kt)("td",{parentName:"tr",align:null},"The customer service number to contact ",(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("em",{parentName:"strong"},"during opening hours")),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"LOCAL_COUNCIL_FULL_NAME")),(0,r.kt)("td",{parentName:"tr",align:null},"The full name of the local authority e.g ",(0,r.kt)("inlineCode",{parentName:"td"},"ABC Council"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"OUT_OF_HOURS_CUSTOMER_SERVICES_TELEPHONE_NUMBER")),(0,r.kt)("td",{parentName:"tr",align:null},"The customer service number to contact ",(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("em",{parentName:"strong"},"outside of opening hours")),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"COUNCIL_WEBSITE_HOMEPAGE_URL")),(0,r.kt)("td",{parentName:"tr",align:null},"The local authority's website URL written ",(0,r.kt)("strong",{parentName:"td"},"without")," a ",(0,r.kt)("inlineCode",{parentName:"td"},"/")," at the end e.g ",(0,r.kt)("inlineCode",{parentName:"td"},"www.example.com"),". ",(0,r.kt)("a",{parentName:"td",href:"#adding-local-authority-web-links-ie-accessibility-statement-privacy-notice-contact-us"},"See here"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"PRIVACY_NOTICE_WEB_PAGE_PATH")),(0,r.kt)("td",{parentName:"tr",align:null},"Resource path to the local authority's privacy notice ",(0,r.kt)("strong",{parentName:"td"},"without")," a ",(0,r.kt)("inlineCode",{parentName:"td"},"/")," at the start. e.g ",(0,r.kt)("inlineCode",{parentName:"td"},"privacynotice"),". ",(0,r.kt)("a",{parentName:"td",href:"#adding-local-authority-web-links-ie-accessibility-statement-privacy-notice-contact-us"},"See here"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ACCESSIBILITY_STATEMENT_WEB_PAGE_PATH")),(0,r.kt)("td",{parentName:"tr",align:null},"Resource path to the local authority's accessibility statement ",(0,r.kt)("strong",{parentName:"td"},"without")," a ",(0,r.kt)("inlineCode",{parentName:"td"},"/")," at the start. e.g ",(0,r.kt)("inlineCode",{parentName:"td"},"accessibility-statement")," . ",(0,r.kt)("a",{parentName:"td",href:"#adding-local-authority-web-links-ie-accessibility-statement-privacy-notice-contact-us"},"See here"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"CONTACT_US_PAGE_PATH")),(0,r.kt)("td",{parentName:"tr",align:null},"Resource path to the local authority's contact details ",(0,r.kt)("strong",{parentName:"td"},"without")," a ",(0,r.kt)("inlineCode",{parentName:"td"},"/")," at the start. e.g ",(0,r.kt)("inlineCode",{parentName:"td"},"contact"),". ",(0,r.kt)("a",{parentName:"td",href:"#adding-local-authority-web-links-ie-accessibility-statement-privacy-notice-contact-us"},"See here"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"CUSTOMER_SERVICES_OPENING_HOURS_DESCRIPTION")),(0,r.kt)("td",{parentName:"tr",align:null},"The customer service opening hours, can set as a JSON or text. ",(0,r.kt)("a",{parentName:"td",href:"#adding-local-authority-customer-services-opening-hours"},"See here"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"CUSTOM_DOMAIN_NAME")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"OPTIONAL:")," The custom domain name you wish to attach to your static site. See ",(0,r.kt)("a",{parentName:"td",href:"/housing-repairs-online/adoption#notes-adding-a-custom-domain"},"here")," for more details")))),(0,r.kt)("h3",{id:"adding-local-authority-web-links-ie-accessibility-statement-privacy-notice-contact-us"},"Adding local authority web links (i.e. Accessibility Statement, Privacy Notice, Contact Us)"),(0,r.kt)("p",null,"The generated links for these pages depends on the value given for ",(0,r.kt)("inlineCode",{parentName:"p"},"COUNCIL_WEBSITE_HOMEPAGE_URL"),"."),(0,r.kt)("p",null,"Each link will be constructed as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Accessibility Statement: ",(0,r.kt)("inlineCode",{parentName:"li"},"COUNCIL_WEBSITE_HOMEPAGE_URL"),"/",(0,r.kt)("inlineCode",{parentName:"li"},"ACCESSIBILITY_STATEMENT_WEB_PAGE_PATH")),(0,r.kt)("li",{parentName:"ul"},"Privacy Notice: ",(0,r.kt)("inlineCode",{parentName:"li"},"COUNCIL_WEBSITE_HOMEPAGE_URL"),"/",(0,r.kt)("inlineCode",{parentName:"li"},"PRIVACY_NOTICE_WEB_PAGE_PATH")),(0,r.kt)("li",{parentName:"ul"},"Contact Us: ",(0,r.kt)("inlineCode",{parentName:"li"},"COUNCIL_WEBSITE_HOMEPAGE_URL"),"/",(0,r.kt)("inlineCode",{parentName:"li"},"CONTACT_US_PAGE_PATH"))),(0,r.kt)("p",null,"For example, if given:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"COUNCIL_WEBSITE_HOMEPAGE_URL")," = ",(0,r.kt)("inlineCode",{parentName:"p"},"www.test-local-gov.uk"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"CONTACT_US_PAGE_PATH")," = ",(0,r.kt)("inlineCode",{parentName:"p"},"contact-details/contact-us")),(0,r.kt)("p",{parentName:"li"},"The link generated will be: ",(0,r.kt)("inlineCode",{parentName:"p"},"www.test-local-gov.uk/contact-details/contact-us")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note: When giving a web resource path, you do not need to add the starting ",(0,r.kt)("inlineCode",{parentName:"p"},"/")," . Similarly for the website homepage URL, you do not need to add the ending ",(0,r.kt)("inlineCode",{parentName:"p"},"/"),". The code will add this when it joins the two values together, as seen in the example above.")),(0,r.kt)("h3",{id:"adding-local-authority-customer-services-opening-hours"},"Adding local authority customer services opening hours"),(0,r.kt)("p",null,"Opening hours can be added by setting the ",(0,r.kt)("inlineCode",{parentName:"p"},"CUSTOMER_SERVICES_OPENING_HOURS_DESCRIPTION")," environment variable to either a JSON object or as text.\nDepending on what is given, it will display the opening hours information either as a list or as text in a simple paragraph in the front end."),(0,r.kt)("h4",{id:"usage"},"Usage"),(0,r.kt)("h5",{id:"as-a-json-object"},"As a JSON object"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If ",(0,r.kt)("inlineCode",{parentName:"p"},"CUSTOMER_SERVICES_OPENING_HOURS_DESCRIPTION")," is a JSON object"),(0,r.kt)("p",{parentName:"li"},"Example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'  {"Monday":"9am to 5pm", "Tuesday":"9am to 5pm", "Wednesday": "9am to 5pm", "Thursday": "9am to 5pm", "Friday": "9am to 5pm"}\n')),(0,r.kt)("p",{parentName:"li"},"the code will generate the following HTML in the frontend:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},"  <ul>\n    <li>Monday: 9am to 5pm</li>\n    <li>Tuesday: 9am to 5pm</li>\n    <li>Wednesday: 9am to 5pm</li>\n    <li>Thursday: 9am to 5pm</li>\n    <li>Friday: 9am to 5pm</li>\n  </ul>\n")),(0,r.kt)("p",{parentName:"li"},"which will display the information as a list in the frontend."))),(0,r.kt)("h5",{id:"as-a-line-of-text-ie-not-in-json"},"As a line of text (i.e not in JSON)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If ",(0,r.kt)("inlineCode",{parentName:"p"},"CUSTOMER_SERVICES_OPENING_HOURS_DESCRIPTION")," is simple text (i.e anything not in the JSON format)"),(0,r.kt)("p",{parentName:"li"},"Example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-text"},"  9am to 5pm, Monday to Friday\n")),(0,r.kt)("p",{parentName:"li"},"the code will generate the following HTML in the frontend:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},"  <p>9am to 5pm, Monday to Friday</p>\n")),(0,r.kt)("p",{parentName:"li"},"which will display the information as a line of text in the frontend."))),(0,r.kt)("h2",{id:"feature-flags"},"Feature Flags"),(0,r.kt)("p",null,"The following feature flag is set in the next root .env file:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"RELEASE_VERSION"))),(0,r.kt)("p",null,"This feature flag can be set to"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"'mvp' or"),(0,r.kt)("li",{parentName:"ul"},"'full'.")),(0,r.kt)("p",null,"Any other value, including the absence of this variable, will result in the application falling back on the 'full' version."),(0,r.kt)("p",null,"The flag denotes which version of the application to build. This flag allows the introduction of version specific behaviour."),(0,r.kt)("p",null,"For example, in the mvp version of the app, the repair description and the image controls are on the same page. In the full version, they are shown on separate pages."),(0,r.kt)("h2",{id:"monitoring-and-alerting"},"Monitoring and alerting"),(0,r.kt)("p",null,"Sentry is used for monitoring and alerting."))}u.isMDXComponent=!0}}]);